var W=/^10.\d{4,9}\/[-._;()/:A-Z0-9]+$/i;function h(e){return e?e.match(W)!==null:!1}var D={test(e){return!!e.hostname.match(/(?:dx\.)?(?:www\.)?doi\.org/)},parse(e){return e.pathname.replace(/^\//,"")}},p={test(e){return e.hostname.endsWith("elifesciences.org")&&e.pathname.startsWith("/articles/")},parse(e){return`10.7554/eLife.${e.pathname.replace("/articles/","")}`}},B={test(e){return e.hostname.endsWith("zenodo.org")&&!!e.pathname.match(/^\/(?:record|badge\/latestdoi)\//)},parse(e){return`10.5281/zenodo.${e.pathname.replace(/^\/(?:record|badge\/latestdoi)\//,"")}`}};function A(e){let n=e.pathname.split("/").filter(r=>!!r);return n.slice(0,-1).map((r,t)=>`${r}/${n[t+1]}`)}var q={test(e){return!!A(e).find(h)},parse(e){return A(e).find(h)}},z={test(e){return h(e.searchParams.get("id"))},parse(e){var n;return(n=e.searchParams.get("id"))!==null&&n!==void 0?n:void 0}},w=[D],j=[D,q,p,B,z];var J="10.13039";function V(e,n){return e?!!$(e,n):!1}function $(e,n){let r;if(e){if(h(e))return e;if(e.startsWith("doi:")&&(r=e.slice(4),h(r)))return r;try{let t=new URL(e.startsWith("http")?e:`http://${e}`),i=w.find(o=>o.test(t)),l=j.find(o=>o.test(t));if(n?.strict&&!i)return;let d=i??l;if(!d)return;if(r=d.parse(t),!n?.strict&&i)return r}catch{}if(h(r))return r}}function G(e,n){let r=$(e,n);if(r)return`https://doi.org/${r}`}function Z(e){let n=$(e);return n?n.startsWith(`${J}/`):!1}var fe={validatePart:h,validate:V,normalize:$,buildUrl:G,isOpenFunderRegistry:Z};function f(e){return e!=null}function N(e){return e.file&&e.location?` (at ${e.file}#${e.location})`:e.file||e.location?` (at ${e.file||e.location})`:""}function g(e,n){let r=n.property;return n.location&&(r=`${n.location}.${n.property}`),{...n,property:e,location:r}}function u(e,n){if(n.suppressErrors)return;let{messages:r}=n;r.errors||(r.errors=[]);let t=`'${n.property}' ${e}${N(n)}`;r.errors.push({property:n.property,message:t}),n.errorLogFn&&n.errorLogFn(t)}function c(e,n){if(n.suppressWarnings)return;let{messages:r}=n;r.warnings||(r.warnings=[]);let t=`'${n.property}' ${e}${N(n)}`;r.warnings.push({property:n.property,message:t}),n.warningLogFn&&n.warningLogFn(t)}function L(e,n){if(typeof e=="string"){if(e.toLowerCase()==="true")return!0;if(e.toLowerCase()==="false")return!1}return e===!0||e===!1?e:u("must be boolean",n)}function R(e,n){let r=Number(e);return Number.isNaN(r)?u(`must be a number: ${e}`,n):f(n.min)&&r<n.min?u(`must be greater than or equal to ${n.min}: ${r}`,n):f(n.max)&&r>n.max?u(`must be less than or equal to ${n.max}: ${r}`,n):n.integer&&!Number.isInteger(r)?u(`must be an integer: ${r}`,n):r}function b(e,n){let r=e;return n.coerceNumber&&typeof r=="number"&&(Number.isNaN(r)&&c("is not a number",n),r=String(r)),typeof r!="string"?u("must be string",n):n.minLength&&r.length<n.minLength?u(`must be greater than ${n.minLength} chars`,n):n.maxLength&&r.length>n.maxLength?u(`must be less than ${n.maxLength} chars`,n):n.regex&&!r.match(n.regex)?u(`must match regex ${n.regex}`,n):(n.escapeFn&&(r=n.escapeFn(r)),r)}function H(e,n){let r=b(e,{...n,maxLength:2048});if(r===void 0)return r;let t;try{t=new URL(r)}catch{return u(`must be valid URL: ${r}`,n)}return n.includes&&!t.origin.includes(n.includes)?u(`must include "${n.includes}": ${r}`,n):r}function Q(e,n){let r=b(e,n);return r===void 0||r.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?r:u(`must be valid email address: ${r}`,n)}function X(e,n){return n.choices.includes(e)?e:u(`invalid value '${e}' - must be one of [${n.choices.join(", ")}]`,n)}function k(e,n){return Object.values(n.enum).includes(e)?e:u(`invalid value '${e}' - must be one of [${Object.values(n.enum).join(", ")}]`,n)}var ee=/^(\d\d\d\d)(?:-(\d\d))?(?:-(\d\d))?(T.*)?$/,ne=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),)?\s*(\d{1,2})\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+(\d\d\d\d)\s*([^\s].*)?$/,re=new Map(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((e,n)=>[e,n+1]));function x(e,n,r){let t=`${n}`.padStart(2,"0"),i=`${r}`.padStart(2,"0");return`${e}-${t}-${i}`}function S(e){return`invalid date "${e}" - must be a full date "YYYY-MM-DD" (ISO 8601) or calendar date "Sat, 1 Jan 2000" (RFC 2822)`}function F(e,n,r){return Y(new Date(n),{...r,suppressErrors:!0,suppressWarnings:!0})!==n?u(S(e),r):n}function Y(e,n){if(typeof e=="string"){let r=e.match(ee);if(r){let[d,o,s,a]=r.slice(1,5);a!==void 0&&c(`Date "${e}" should not include a time component ("${a}"), which has been ignored`,n);let m=[d,o??"01",s??"01"].join("-");return(o===void 0||s===void 0)&&c(`non-standard date "${e}": interpreting date as "${m}".
Please use a full date "YYYY-MM-DD" (ISO 8601).`,n),F(e,m,n)}if(r=e.match(ne),r){let[d,o,s,a]=r.slice(2,6);a!==void 0&&c(`Date "${e}" should not include a time component ("${a}"), which has been ignored`,n);let m=parseInt(s),v=re.get(o),y=parseInt(d),K=x(m,v,y);return F(e,K,n)}let t=Date.parse(e);if(isNaN(t))return u(S(e),n);let i=new Date(t),l=x(i.getFullYear(),i.getMonth()+1,i.getDate());return c(`non-standard date "${e}": interpreting date as "${l}".
Please use a full date "YYYY-MM-DD" (ISO 8601).`,n),l}else return e instanceof Date?n.dateIsLocal?x(e.getFullYear(),e.getMonth()+1,e.getDate()):x(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()):u(S(e),n)}function I(e,n){return typeof e!="object"?u("must be object",n):Array.isArray(e)?u("must be object, not array",n):e}function U(e,n,r){var t;let i={},l=n.required||[],d=n.optional||[],o=Object.entries((t=n.alias)!==null&&t!==void 0?t:{}).filter(a=>l.includes(a[1])||d.includes(a[1])).map(a=>a[0]),s=[];if(Object.keys(e).forEach(a=>{var m;if(l.includes(a)||d.includes(a))i[a]=e[a],l=l.filter(v=>v!==a);else if(o.includes(a)){let v=(m=n.alias)===null||m===void 0?void 0:m[a];e[v]===void 0?(i[v]=e[a],l=l.filter(y=>y!==v)):c(`both "${v}" and "${a}" were provided, "${a}" was ignored.`,r)}else s.push(a),r.keepExtraKeys&&(i[a]=e[a])}),!(l.length&&(u(`missing required key${l.length>1?"s":""}: ${l.join(", ")}`,r),!r.returnInvalidPartial)))return s.length&&c(`extra key${s.length>1?"s":""} ignored: ${s.join(", ")}`,r),i}function _(e,n,r){let t=I(e,r);if(t!==void 0)return U(t,n,r)}function te(e,n,r){let t;if(Array.isArray(e))t=e;else if(n.coerce)t=[e];else return u("must be an array",n);return t.map((i,l)=>r(i,l)).filter(i=>i!==void 0)}function O(e,n,r){let t={...e};return r.forEach(i=>{if(!f(t[i])&&f(n[i])){let l=i;t[l]=n[l]}}),t}var M=["enumerator","all","headings"],T=["heading_1","heading_2","heading_3","heading_4","heading_5","heading_6"],ae=["figure","subfigure","equation","subequation","table","code",...T],P=["enabled","start","template"],ie={sections:"headings",h1:"heading_1",h2:"heading_2",h3:"heading_3",h4:"heading_4",h5:"heading_5",h6:"heading_6",heading1:"heading_1",heading2:"heading_2",heading3:"heading_3",heading4:"heading_4",heading5:"heading_5",heading6:"heading_6"};function C(e){return typeof e=="string"?["true","false"].includes(e.toLowerCase()):typeof e=="boolean"}function E(e,n){var r,t;C(e)?e={enabled:e}:typeof e=="number"?e={start:e}:typeof e=="string"&&(e={template:e});let i=_(e,{optional:P},n);if(i===void 0)return;let l={};if(f(i.enabled)){let d=L(i.enabled,g("enabled",n));f(d)&&(l.enabled=d)}if(f(i.start)){let d=R(i.start,{...g("start",n),integer:!0,min:1});d&&(l.start=d,l.enabled=(r=l.enabled)!==null&&r!==void 0?r:!0)}if(f(i.template)){let d=b(i.template,g("template",n));f(d)&&(l.template=d,l.enabled=(t=l.enabled)!==null&&t!==void 0?t:!0)}if(Object.keys(l).length!==0)return l}function xe(e,n){var r,t,i,l;C(e)&&(e={all:e});let d=_(e,{optional:[...ae,...M],alias:ie},{...n,suppressWarnings:!0,keepExtraKeys:!0});if(d===void 0)return;let o={},s;if(f(d.enumerator)){let a=g("enumerator",n);o.enumerator=E(d.enumerator,a),((r=o.enumerator)===null||r===void 0?void 0:r.enabled)!=null&&(o.enumerator.enabled!==!0&&c("value for 'enabled' is ignored",a),delete o.enumerator.enabled),((t=o.enumerator)===null||t===void 0?void 0:t.start)!=null&&(c("value for 'start' is ignored",a),delete o.enumerator.start)}if(f(d.all)){let a=g("all",n);o.all=E(d.all,a),((i=o.all)===null||i===void 0?void 0:i.template)!=null&&(c("value for 'template' is ignored",a),delete o.all.template),((l=o.all)===null||l===void 0?void 0:l.start)!=null&&(c("value for 'start' is ignored",a),delete o.all.start)}if(f(d.headings)&&(s=E(d.headings,g("headings",n)),T.forEach(a=>{s&&!f(d[a])&&(d[a]=s)})),Object.keys(d).filter(a=>!M.includes(a)).forEach(a=>{if(f(d[a])){let m=E(d[a],g(a,n));if(!f(m))return;s&&T.includes(a)?o[a]={...s,...m}:o[a]=m}}),Object.keys(o).length!==0)return o}function _e(e,n){let r={...n,...e};return Object.entries(n??{}).filter(([t])=>!M.includes(t)).forEach(([t,i])=>{var l,d,o;r[t]=O((l=e?.[t])!==null&&l!==void 0?l:{},{...i,enabled:(o=(d=e?.all)===null||d===void 0?void 0:d.enabled)!==null&&o!==void 0?o:i.enabled},P)}),r}export{f as a,g as b,u as c,c as d,L as e,R as f,b as g,H as h,Q as i,X as j,k,Y as l,I as m,U as n,_ as o,te as p,fe as q,xe as r,_e as s};
